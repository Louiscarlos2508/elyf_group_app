# Story 3.4: Standardize Business Error Handling

This story standardizes how business rule violations (e.g., liquidity issues, stock shortages) are reported to the user. Instead of using generic errors like `ArgumentError`, we will use a dedicated `BusinessException` that the UI can handle gracefully.

## User Review Required

> [!NOTE]
> We will add a new `BusinessException` type to `app_exceptions.dart`. Controllers will throw this exception when a business rule is violated.

## Proposed Changes

### Core Module

#### [MODIFY] [app_exceptions.dart](file:///home/carlos-simpore/StudioProjects/elyf_group_app/lib/core/errors/app_exceptions.dart)
- Add `BusinessException` class.

#### [MODIFY] [error_handler.dart](file:///home/carlos-simpore/StudioProjects/elyf_group_app/lib/core/errors/error_handler.dart)
- Update `handleError` and `getErrorTitle` to support `BusinessException`.

### Feature Controllers/Services

#### [MODIFY] [orange_money_controller.dart](file:///home/carlos-simpore/StudioProjects/elyf_group_app/lib/features/orange_money/application/controllers/orange_money_controller.dart)
- Replace `ArgumentError` with `BusinessException`.

#### [MODIFY] [gas_controller.dart](file:///home/carlos-simpore/StudioProjects/elyf_group_app/lib/features/gaz/application/controllers/gas_controller.dart)
- Replace `ArgumentError` with `BusinessException`.

#### [MODIFY] [production_service.dart](file:///home/carlos-simpore/StudioProjects/elyf_group_app/lib/features/eau_minerale/domain/services/production_service.dart) & [sale_service.dart](file:///home/carlos-simpore/StudioProjects/elyf_group_app/lib/features/eau_minerale/domain/services/sale_service.dart)
- Standardize error reporting.

## Verification Plan

### Automated Tests
- Update existing tests in `orange_money_controller_test.dart` and `gas_controller_test.dart` to expect `BusinessException`.
- Verify `ErrorHandler` correctly maps `BusinessException`.

### Manual Verification
- Trigger a liquidity error in the app and verify the error message is displayed in a consistent UI dialog (if UI is available).
